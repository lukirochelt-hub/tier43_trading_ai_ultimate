# =========================
# TIER 4.3+ ULTIMATE .ENV
# =========================
# Hinweise:
# - Zeiten IMMER in UTC. News-/Kalenderimporte mit "Z"-Suffix.
# - Diese Datei NIEMALS ins Git pushen. Keys regelmäßig rotieren.

# -------- Security / Core --------
SECRET_KEY=1325489Ac
ENV_NAME=prod
TZ=UTC
LOG_LEVEL=INFO
PYTHONWARNINGS=ignore
SERVER_PORT=8000

ADV_SHARED_SECRET=1325489Ac
ADV_SIG_HEADER=X-Signature
ADV_ALLOWED_SYMBOLS=BTCUSDT,SOLUSDT,ETHUSDT
ADV_ALLOWED_TF=5,15,30,60,240,1D,10080   # inkl. Weekly
# optional:
ADV_CLIENT_IDS=tv,rule,ml
ADV_CLIENT_ID_HEADER=X-Client-Id
ADV_MAX_SKEW_SEC=120
ADV_DEDUPE_TTL_SEC=900
ADV_DEDUPE_LRU=4096

OPTUNA_SYMBOL=BTCUSDT
OPTUNA_TIMEFRAME=15m
OPTUNA_START=2023-01-01
OPTUNA_END=2025-01-01
OPTUNA_STUDY_NAME=tier43_plus_BTCUSDT_15m
OPTUNA_N_TRIALS=150
OPTUNA_PRUNER=median

BACKTEST_START=2022-01-01
BACKTEST_END=2025-10-01


# Zugriff nur von diesen IPs erlauben (Komma-getrennt)
ALLOWLIST_IPS=127.0.0.1,::1
# WARNUNG: Nicht öffentlich freigeben. Nur bei Reverse-Proxy/Firewall nutzen!
#IP_WHITELIST=0.0.0.0/0

# -------- Paths --------
DATA_DIR=./data
LOG_DIR=./logs
MODELS_DIR=./models
NEWS_CALENDAR_CSV=./data/news_calendar.csv
VENUE_CAPS_JSON=./data/venue_caps.json
REPLAY_CSV=./data/sol_ohlcv_15m.csv
REPLAY_L1=./data/l1.csv
REPLAY_L2=./data/l2.csv

# -------- Symbols / Timeframes --------
PRIMARY_SYMBOL=SOLUSDT
HEDGE_SYMBOL=BTCUSDT
TF_LIST=5m,15m,30m,1h,4h,1d
TRADE_TIMEFRAMES=5m,15m,30m,1h,4h,1d

# -------- Trading / Risk (global) --------
ALERT_CONF_THRESHOLD=0.62
MAX_LEVERAGE=3.0
TAKER_FEE=0.0002
MAKER_FEE=0.0
TARGET_VOL_PA=0.15

DRAWDOWN_RAMP_LO=-0.06
DRAWDOWN_RAMP_HI=0.00
DRAWDOWN_FLOOR_MULT=0.5
DAILY_DD_KILLSWITCH=-0.025
INTRADAY_DD_KILLSWITCH=-0.050

# ---- Secure Bridge (Trading AI Secure) ----
SECURE_ENDPOINT_URL=http://127.0.0.1:8787/ingest
SECURE_BEARER_TOKEN=REPLACE_ME
SECURE_TIMEOUT_SEC=6
SECURE_MAX_RETRIES=3
SECURE_BACKOFF_BASE=0.6     # Sekunden

# ---- Prometheus Metrics ----
PROM_ENABLE=1               # 0/1
PROM_NAMESPACE=tia          # optional Namespace-Präfix


# -------- Execution Guards --------
SPREAD_GUARD_BPS=8
SLIP_IOC_GUARD_BPS=4
MAKER_TARGET_MIN=0.60
META_THRESHOLD_BASE=0.60
ADX_TREND_TH=20
RVZ_HIGHVOL_TH=1.5
NEWS_LOCK_MINUTES_BEFORE=15
NEWS_LOCK_MINUTES_AFTER=15
NEWS_MIN_IMPACT=MED

# -------- Funding / Costs --------
USE_FUNDING_COSTS=1
FUNDING_SCALE=1.0
IMPACT_COEF_BPS=0.15

# -------- Hedge (rolling β) --------
HEDGE_ENABLE=1
HEDGE_BETA_COLS=beta_sol_btc_30d,beta_sol_btc_60d,beta_sol_btc_90d
HEDGE_SCALE=0.8
HEDGE_RATIO_CAP=0.6

# -------- Feature Store / Training --------
USE_QUANTILE_HEADS=1
Q_ALPHA_LO=0.10
Q_ALPHA_HI=0.90
TIME_DECAY_MIN=0.2
TIME_DECAY_MAX=1.0

# -------- Optuna / Backtest --------
OPTUNA_N_TRIALS=120
OPTUNA_N_SPLITS=6
OPTUNA_EMBARGO_FRAC=0.02
ALLOW_SHORT=1
LAMBDA_TURNOVER=0.10
MU_MAXDD=1.50

# -------- Storage --------
SQLITE_ENABLED=true
SQLITE_PATH=./data/sol_trading.db
POSTGRES_DSN=postgresql://user:pass@localhost:5432/tier43
REDIS_URL=redis://localhost:6379/0
S3_ENDPOINT=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=tier43-models

# -------- Exchanges / Data Feeds --------
# Binance (nur für REST-Klines/Ticker sind Keys nicht nötig; für private Endpunkte schon)
BINANCE_API_KEY=zlTbRhq7GAuNdvx8ztKDbn46KY7wN4i8PwD73dfqQFO5ie0RI8lAJNvXCu3r9YYF
BINANCE_API_SECRET=xnh5JwqCpQQQTxdhnWGUsVHxMCOZMOaqjj9fRIcRvivfd24SALrgD3sqxEEmr8vu
BINANCE_FUTURES_MODE=USDT

# Bybit (für öffentliche Klines/Ticker ebenfalls optional)
BYBIT_API_KEY=YW2KFqLuO7gZrAI7rc
BYBIT_API_SECRET=ShK79h7uX4FvUT7Y0GICtUqad5rjLhdlef1w
BYBIT_CATEGORY=linear

# Alternative & Open Feeds
COINGLASS_API_KEY=
COINGLASS_BASE=https://open-api.coinglass.com/api
HELIUS_API_KEY=138c2338-ed27-4ec7-aa22-40c5540a64d8
HELIUS_BASE=https://api.helius.xyz

# Open-Source / Free APIs
COINCAP_BASE=https://api.coincap.io/v2
COINGECKO_BASE=https://api.coingecko.com/api/v3
ALTERNATIVE_ME_FGI=https://api.alternative.me/fng/

# Macro / FX / Data APIs
FRED_API_KEY=
FRED_API_BASE=https://api.stlouisfed.org/fred
ECB_SDW_BASE=https://sdw-wsrest.ecb.europa.eu/service
BLS_API_KEY=
BLS_API_BASE=https://api.bls.gov/publicAPI/v2
CENSUS_API_KEY=
CENSUS_API_BASE=https://api.census.gov/data
TWELVEDATA_API_KEY=f24b3ec81b0c46f9b678d7c32496475d
ALPHAVANTAGE_API_KEY=WX4ZL35EDYQDF39A
FINNHUB_API_KEY=d3s04l9r01qldtrbbrdgd3s04l9r01qldtrbbre0

# Economic Calendars (achte auf gültige Datumsbereiche in UTC)
FOMC_ICS_URL=https://www.federalreserve.gov/newsevents/calendar/ical/fomc-meetings.ics
ECON_JSON_URL=https://financialmodelingprep.com/api/v3/economic_calendar?from=2025-10-20&to=2025-12-31&apikey=YOUR_API_KEY

# -------- TradingView Webhook (eingehend) --------
TV_WEBHOOK_SECRET=CHANGE_ME_TV
TV_WEBHOOK_PORT=8787
TV_WEBHOOK_PATH=/tv

# -------- Messaging / Ops --------
TELEGRAM_BOT_TOKEN=8387136418:AAG7wtvqduKa6Ac5SbZk9SHFLFXgWC6jWmA
TELEGRAM_CHAT_ID=7735834486
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=

# -------- Prometheus / Grafana --------
PROM_HOST=0.0.0.0
PROM_PORT=8009
GRAFANA_PROVISIONING=1

# -------- Model-Dirs / Canary --------
MODELS_PROD_DIR=./models/prod
MODELS_CANARY_DIR=./models/canary
CANARY_SHARE=0.10
CANARY_SHARE_AFTER_PROMO=0.10
DRY_RUN=0

# -------- News / Sources (UTC-only) --------
NEWS_SRC_TV=https://www.tradingview.com/economic-calendar/
NEWS_SRC_FED_CAL=https://www.federalreserve.gov/monetarypolicy/fomccalendars.htm
NEWS_SRC_FED_EVENTS=https://www.federalreserve.gov/newsevents/calendar.htm
NEWS_SRC_ECB_CAL=https://www.ecb.europa.eu/press/calendars/mgcgc/html/index.en.html
NEWS_SRC_ECB_OVERVIEW=https://www.ecb.europa.eu/press/calendars/html/index.en.html
NEWS_SRC_BLS=https://www.bls.gov/schedule/
NEWS_SRC_CENSUS=https://www.census.gov/economic-indicators/calendar-listview.html
NEWS_SRC_FOMC_ALT=https://www.mnimarkets.com/calendars/fomc-meeting-calendar

# -------- Other Switches --------
ALLOW_WITHDRAWALS=0

ENSEMBLE_STRATEGY=weighted
ENSEMBLE_MIN_CONF=0.55
ENSEMBLE_OUTBOX=./outbox
ENSEMBLE_SAVE_DIR=./logs
ENSEMBLE_PORT=8788
ENSEMBLE_WEBHOOK_URL=http://127.0.0.1:8787/ingest  # falls du einen Secure-Endpoint hast
ENSEMBLE_API_TOKEN=DEIN_TOKEN